var _0x3ffc17=_0x1361;(function(_0x5bf0ec,_0x2eeec7){var _0x9afbc7=_0x1361,_0x18f4f4=_0x5bf0ec();while(!![]){try{var _0x3fa5e2=-parseInt(_0x9afbc7(0x142))/0x1+parseInt(_0x9afbc7(0x105))/0x2+parseInt(_0x9afbc7(0x12d))/0x3*(parseInt(_0x9afbc7(0xe6))/0x4)+-parseInt(_0x9afbc7(0x159))/0x5+parseInt(_0x9afbc7(0xe7))/0x6+-parseInt(_0x9afbc7(0x111))/0x7+-parseInt(_0x9afbc7(0xea))/0x8*(-parseInt(_0x9afbc7(0xf2))/0x9);if(_0x3fa5e2===_0x2eeec7)break;else _0x18f4f4['push'](_0x18f4f4['shift']());}catch(_0x12000f){_0x18f4f4['push'](_0x18f4f4['shift']());}}}(_0xc08a,0x7da14));import*as _0xee9829 from'https://unpkg.com/three@0.126.1/build/three.module.js';import{OrbitControls}from'https://unpkg.com/three@0.126.1/examples/jsm/controls/OrbitControls.js';function _0xc08a(){var _0x5ee607=['CatmullRomCurve3','geometry','./img/globe1.jpg','appendChild','scale','getElementById','lineTo','body','near','enableDamping','onChange','Show\x20Stars','beginPath','35744TJnozq','1352358cSJYEn','lat','Vector2','33992hrkJbl','Sprite','totalError','Points','setAttribute','addEventListener','lerpVectors','color','1539kagVSj','round','stroke','rgba(0,\x200,\x200,\x201.0)','strokeStyle','WindowResize','innerHTML','sqrt','\x20km\x20<br/>\x20&nbsp;&nbsp;\x20delta:\x20','Float32BufferAttribute','render','0\x200\x2010px\x20gold,0\x200\x2020px\x20firebrick,0\x200\x2040px\x20pink,0\x200\x2080px\x20red','dampingFactor','enablePan','asin','fontsize','innerHeight','click','px\x20','1579100ZZIzDR','Texture','style','push','setHex','TextureLoader','object','rotateSpeed','sin','multiplyScalar','rotation','pointermove','6450073GTNkxi','backgroundColor','cos','fromCharCode','clientY','BufferGeometry','minDistance','PointsMaterial','intersectObjects','closePath','log','fillStyle','0\x200\x2010px\x20greenyellow,0\x200\x2020px\x20darkgreen,0\x200\x2040px\x20darkcyan,\x200\x200\x2080px\x20green','Scene','needsUpdate','toString','globe','font','lon','SphereBufferGeometry','abs','maxDistance','remove','Basic\x20Config','solveBtn','far','lat:','borderThickness','126OFEikV','quadraticCurveTo','canvas','textShadow','pointerup','borderColor','set','children','totalErrorColor','measureText','updateProjectionMatrix','addFolder','stars','dispose','ray','add','setFromCamera','Mesh','domElement','\x20lon:','setSize','481751IqYqgr','Vector3','devicePixelRatio','atan2','listen','hasOwnProperty','length','Arial','Cmmon,\x20you\x20could\x20have\x20tried\x20harder!','Show\x20Globe','PerspectiveCamera','random','fontface','normalize','intersectSphere','material','update','fill','position','name','enabled','addVectors','depthTest','995320ACqSVK','MeshBasicMaterial'];_0xc08a=function(){return _0x5ee607;};return _0xc08a();}import{atlanta,beijing,cape,delhi,easter,florence,goiania,hobart,irkutsk,jakarta,kiev}from'./coordinates.js';let scene,camera,controls,renderer,stars,sphere,frame=0x0;const gui=new dat['GUI'](),world={'wireframe':!![],'globe':!![],'stars':!![]};var top=gui[_0x3ffc17(0x138)](_0x3ffc17(0x128)),starsGUI=top[_0x3ffc17(0x13c)](world,_0x3ffc17(0x139))['name'](_0x3ffc17(0xe4))[_0x3ffc17(0x146)]();starsGUI[_0x3ffc17(0xe3)](function(_0x421375){if(_0x421375)scene['add'](stars);else scene['remove'](stars);});var globeGUI=top[_0x3ffc17(0x13c)](world,_0x3ffc17(0x121))[_0x3ffc17(0x155)](_0x3ffc17(0x14b))[_0x3ffc17(0x146)]();globeGUI[_0x3ffc17(0xe3)](function(_0x1672bf){var _0x461152=_0x3ffc17;if(_0x1672bf)scene['add'](sphere);else scene[_0x461152(0x127)](sphere);});function init(){var _0x5a4d76=_0x3ffc17;scene=new _0xee9829[(_0x5a4d76(0x11e))](),camera=new _0xee9829[(_0x5a4d76(0x14c))](0x2d,innerWidth/ innerHeight,0x1,0x578),scene[_0x5a4d76(0x13c)](camera),camera[_0x5a4d76(0x154)][_0x5a4d76(0x133)](0x0,0x1e,0x5a),camera['lookAt'](scene['position']),camera[_0x5a4d76(0x137)](),renderer=new _0xee9829['WebGLRenderer']({'antialias':!![]}),renderer[_0x5a4d76(0x141)](innerWidth,innerHeight),renderer['setPixelRatio'](window[_0x5a4d76(0x144)]),document[_0x5a4d76(0x162)][_0x5a4d76(0x15e)](renderer['domElement']),THREEx[_0x5a4d76(0xf7)](renderer,camera),controls=new OrbitControls(camera,renderer[_0x5a4d76(0x13f)]),controls[_0x5a4d76(0xff)]=![],controls[_0x5a4d76(0xe2)]=!![],controls[_0x5a4d76(0xfe)]=0.075,controls[_0x5a4d76(0x117)]=0x32,controls[_0x5a4d76(0x126)]=0xc8,controls[_0x5a4d76(0x10c)]=0.5;}function createGlobe(){var _0x5a27f9=_0x3ffc17;sphere=new _0xee9829[(_0x5a27f9(0x13e))](new _0xee9829[(_0x5a27f9(0x124))](0x1e,0x32,0x32),new _0xee9829[(_0x5a27f9(0x15a))]({'map':new _0xee9829[(_0x5a27f9(0x10a))]()['load'](_0x5a27f9(0x15d))})),sphere['position'][_0x5a27f9(0x133)](0x0,0x0,0x0),scene[_0x5a27f9(0x13c)](sphere);const _0x2f8847=new _0xee9829[(_0x5a27f9(0x13e))](new _0xee9829[(_0x5a27f9(0x124))](0x1e,0x32,0x1e),new _0xee9829[(_0x5a27f9(0x15a))]({'color':0xbbbbbb,'wireframe':!![],'transparent':!![],'opacity':0.15}));_0x2f8847[_0x5a27f9(0x154)][_0x5a27f9(0x133)](0x0,0x0,0x0),scene[_0x5a27f9(0x13c)](_0x2f8847);}function genStars(){var _0x5e71f3=_0x3ffc17;const _0x4eb5d7=new _0xee9829[(_0x5e71f3(0x116))](),_0x58d8c7=new _0xee9829[(_0x5e71f3(0x118))]({'color':0xffffff}),_0x4847f8=[];for(let _0x3ab7f3=0x0;_0x3ab7f3<0xc350;_0x3ab7f3++){const _0x319c0f=(Math[_0x5e71f3(0x14d)]()-0.5)*0x3e8,_0x3b29a4=(Math[_0x5e71f3(0x14d)]()-0.5)*0x3e8,_0x551243=(Math[_0x5e71f3(0x14d)]()-0.5)*0x3e8;;if(_0x319c0f*_0x319c0f+_0x3b29a4*_0x3b29a4+_0x551243*_0x551243>0x1d4c0)_0x4847f8[_0x5e71f3(0x108)](_0x319c0f,_0x3b29a4,_0x551243);}_0x4eb5d7[_0x5e71f3(0xee)](_0x5e71f3(0x154),new _0xee9829[(_0x5e71f3(0xfb))](_0x4847f8,0x3)),stars=new _0xee9829[(_0x5e71f3(0xed))](_0x4eb5d7,_0x58d8c7),scene[_0x5e71f3(0x13c)](stars);}function rotateStars(){var _0x571b7d=_0x3ffc17;stars['rotation']['x']+=0.0001,stars[_0x571b7d(0x10f)]['y']+=0.0001;}init(),createGlobe(),genStars();let cities=[],rayCities=[];function generateCity(_0x5ee87c,_0x1a2fee){var _0x1d94cc=_0x3ffc17;const _0x1669de=new _0xee9829[(_0x1d94cc(0x13e))](new _0xee9829[(_0x1d94cc(0x124))](0.25,0x15,0x15),new _0xee9829[(_0x1d94cc(0x15a))]({'color':'#ff0000'}));_0x1669de[_0x1d94cc(0x155)]=_0x5ee87c,_0x1669de[_0x1d94cc(0x154)]['set'](_0x1a2fee['x'],_0x1a2fee['y'],_0x1a2fee['z']),cities[_0x1d94cc(0x108)](_0x1669de),rayCities[_0x1d94cc(0x108)](_0x1669de),_0x1669de['add'](generateLabel(_0x1669de));}function makeTextSprite(_0x30aa12,_0x5bf396){var _0x1d3adf=_0x3ffc17;if(_0x5bf396===undefined)_0x5bf396={};var _0x35290d=_0x5bf396[_0x1d3adf(0x147)](_0x1d3adf(0x14e))?_0x5bf396['fontface']:_0x1d3adf(0x149),_0x1ce8cc=_0x5bf396[_0x1d3adf(0x147)](_0x1d3adf(0x101))?_0x5bf396['fontsize']:0x12,_0x463e3b=_0x5bf396['hasOwnProperty'](_0x1d3adf(0x12c))?_0x5bf396['borderThickness']:0x4,_0x2350e7=_0x5bf396[_0x1d3adf(0x147)](_0x1d3adf(0x132))?_0x5bf396['borderColor']:{'r':0x0,'g':0x0,'b':0x0,'a':0x1},_0x89c8b6=_0x5bf396[_0x1d3adf(0x147)](_0x1d3adf(0x112))?_0x5bf396[_0x1d3adf(0x112)]:{'r':0xff,'g':0xff,'b':0xff,'a':0x1},_0x3fd34d=document['createElement'](_0x1d3adf(0x12f)),_0x1b9421=_0x3fd34d['getContext']('2d');_0x1b9421[_0x1d3adf(0x122)]='Bold\x20'+_0x1ce8cc+_0x1d3adf(0x104)+_0x35290d;var _0xd0c04e=_0x1b9421[_0x1d3adf(0x136)](_0x30aa12),_0x13b624=_0xd0c04e['width'];_0x1b9421[_0x1d3adf(0x11c)]='rgba('+_0x89c8b6['r']+','+_0x89c8b6['g']+','+_0x89c8b6['b']+','+_0x89c8b6['a']+')',_0x1b9421[_0x1d3adf(0xf6)]='rgba('+_0x2350e7['r']+','+_0x2350e7['g']+','+_0x2350e7['b']+','+_0x2350e7['a']+')',_0x1b9421['lineWidth']=_0x463e3b,roundRect(_0x1b9421,_0x463e3b/0x2+0x32,_0x463e3b/0x2,_0x13b624+_0x463e3b,_0x1ce8cc*1.2+_0x463e3b,0x13),_0x1b9421[_0x1d3adf(0x11c)]=_0x1d3adf(0xf5),_0x1b9421['fillText'](_0x30aa12,_0x463e3b+0x32,_0x1ce8cc+_0x463e3b);var _0x5893fd=new _0xee9829[(_0x1d3adf(0x106))](_0x3fd34d);_0x5893fd[_0x1d3adf(0x11f)]=!![];var _0xbe5541=new _0xee9829['SpriteMaterial']({'map':_0x5893fd}),_0x14345f=new _0xee9829[(_0x1d3adf(0xeb))](_0xbe5541);return _0x14345f[_0x1d3adf(0x15f)]['set'](0x5,0x2,0x6),_0xbe5541[_0x1d3adf(0x158)]=![],_0x14345f;}function roundRect(_0x46a4fa,_0x4a66f4,_0x1ccb67,_0x253a21,_0x1e59d8,_0x43fe5a){var _0x21f0a6=_0x3ffc17;_0x46a4fa[_0x21f0a6(0xe5)](),_0x46a4fa['moveTo'](_0x4a66f4+_0x43fe5a,_0x1ccb67),_0x46a4fa['lineTo'](_0x4a66f4+_0x253a21-_0x43fe5a,_0x1ccb67),_0x46a4fa['quadraticCurveTo'](_0x4a66f4+_0x253a21,_0x1ccb67,_0x4a66f4+_0x253a21,_0x1ccb67+_0x43fe5a),_0x46a4fa['lineTo'](_0x4a66f4+_0x253a21,_0x1ccb67+_0x1e59d8-_0x43fe5a),_0x46a4fa['quadraticCurveTo'](_0x4a66f4+_0x253a21,_0x1ccb67+_0x1e59d8,_0x4a66f4+_0x253a21-_0x43fe5a,_0x1ccb67+_0x1e59d8),_0x46a4fa[_0x21f0a6(0x161)](_0x4a66f4+_0x43fe5a,_0x1ccb67+_0x1e59d8),_0x46a4fa[_0x21f0a6(0x12e)](_0x4a66f4,_0x1ccb67+_0x1e59d8,_0x4a66f4,_0x1ccb67+_0x1e59d8-_0x43fe5a),_0x46a4fa[_0x21f0a6(0x161)](_0x4a66f4,_0x1ccb67+_0x43fe5a),_0x46a4fa[_0x21f0a6(0x12e)](_0x4a66f4,_0x1ccb67,_0x4a66f4+_0x43fe5a,_0x1ccb67),_0x46a4fa[_0x21f0a6(0x11a)](),_0x46a4fa[_0x21f0a6(0x153)](),_0x46a4fa[_0x21f0a6(0xf4)]();}function generateLabel(_0x431904){var _0x36f023=_0x3ffc17;return makeTextSprite(_0x431904[_0x36f023(0x155)],{'fontsize':0x50,'borderColor':{'r':0xe1,'g':0x0,'b':0x0,'a':0x1},'backgroundColor':{'r':0xe1,'g':0x8c,'b':0x0,'a':0.9}});}function convertCoordsRad(_0xeff040,_0x2cc0a2){var _0x59892b=_0x3ffc17,_0x46ee8d=_0xeff040*(Math['PI']/0xb4),_0x59c232=-_0x2cc0a2*(Math['PI']/0xb4),_0x41e790=Math[_0x59892b(0x113)](_0x46ee8d)*Math[_0x59892b(0x113)](_0x59c232)*0x1e,_0x317851=Math[_0x59892b(0x10d)](_0x46ee8d)*0x1e,_0xab7b4=Math[_0x59892b(0x113)](_0x46ee8d)*Math[_0x59892b(0x10d)](_0x59c232)*0x1e;return{'x':_0x41e790,'y':_0x317851,'z':_0xab7b4};}function convertPolarToAng(_0x58c3dd){var _0x3046c9=_0x3ffc17,_0x1141c2=Math[_0x3046c9(0x100)](_0x58c3dd['y']/0x1e)*(0xb4/Math['PI']),_0x971f81=-0x1*Math['atan2'](_0x58c3dd['z'],_0x58c3dd['x'])*(0xb4/Math['PI']);return{'lat':_0x1141c2,'lon':_0x971f81};}function sca(){return Math['random']()*0x10-0x8;}const EarthR=0x6136b8;function totalError(){var _0x329434=_0x3ffc17,_0xe0b959=0x0;for(let _0x44be2c=0x0;_0x44be2c<deltaDistances[_0x329434(0x148)];_0x44be2c++){for(let _0xa3bb8f=0x0;_0xa3bb8f<deltaDistances[_0x329434(0x148)];_0xa3bb8f++){_0xe0b959+=Math['abs'](deltaDistances[_0x44be2c][_0xa3bb8f]);}}return Math[_0x329434(0xf3)](_0xe0b959/0x2*0x64)/0x64;}function haversine(){var _0x1ea4ec=_0x3ffc17,_0x134ddb=convertPolarToAng(cities[dragIdx][_0x1ea4ec(0x154)]);document[_0x1ea4ec(0x160)]('loc')['innerHTML']=_0x1ea4ec(0x12b)+(Math[_0x1ea4ec(0xf3)](_0x134ddb[_0x1ea4ec(0xe8)]*0x64)/0x64)[_0x1ea4ec(0x120)]()+_0x1ea4ec(0x140)+(Math['round'](_0x134ddb[_0x1ea4ec(0x123)]*0x64)/0x64)['toString']();for(var _0x2d1b54=0x0;_0x2d1b54<cities[_0x1ea4ec(0x148)];_0x2d1b54++){var _0x441c19=convertPolarToAng(cities[_0x2d1b54][_0x1ea4ec(0x154)]),_0x29f2da=_0x134ddb[_0x1ea4ec(0xe8)]*Math['PI']/0xb4,_0x3289fb=_0x441c19[_0x1ea4ec(0xe8)]*Math['PI']/0xb4,_0xf51c79=(_0x441c19[_0x1ea4ec(0xe8)]-_0x134ddb['lat'])*Math['PI']/0xb4,_0x1250df=(_0x441c19[_0x1ea4ec(0x123)]-_0x134ddb['lon'])*Math['PI']/0xb4,_0x54d719=Math['sin'](_0xf51c79/0x2)*Math[_0x1ea4ec(0x10d)](_0xf51c79/0x2)+Math[_0x1ea4ec(0x113)](_0x29f2da)*Math[_0x1ea4ec(0x113)](_0x3289fb)*Math[_0x1ea4ec(0x10d)](_0x1250df/0x2)*Math[_0x1ea4ec(0x10d)](_0x1250df/0x2),_0x458e2a=0x2*Math[_0x1ea4ec(0x145)](Math[_0x1ea4ec(0xf9)](_0x54d719),Math[_0x1ea4ec(0xf9)](0x1-_0x54d719)),_0x3d48ab=Math['round'](EarthR*_0x458e2a/0xa)/0x64;currDistance[dragIdx][_0x2d1b54]=_0x3d48ab,currDistance[_0x2d1b54][dragIdx]=_0x3d48ab,deltaDistances[dragIdx][_0x2d1b54]=currDistance[dragIdx][_0x2d1b54]-trueDistance[dragIdx][_0x2d1b54],deltaDistances[_0x2d1b54][dragIdx]=currDistance[dragIdx][_0x2d1b54]-trueDistance[dragIdx][_0x2d1b54],document['getElementById'](_0x2d1b54['toString']())['innerHTML']=cities[dragIdx][_0x1ea4ec(0x155)]+'->'+cities[_0x2d1b54][_0x1ea4ec(0x155)]+':'+_0x3d48ab[_0x1ea4ec(0x120)]()+_0x1ea4ec(0xfa)+(Math[_0x1ea4ec(0xf3)](deltaDistances[_0x2d1b54][dragIdx]*0x64)/0x64)[_0x1ea4ec(0x120)]();}var _0xe09b6c=totalError();document[_0x1ea4ec(0x160)]('totalError')[_0x1ea4ec(0xf8)]=_0xe09b6c[_0x1ea4ec(0x120)](),_0xe09b6c<0x49c?(document[_0x1ea4ec(0x160)](_0x1ea4ec(0x135))[_0x1ea4ec(0x107)]['color']='lightgreen',document[_0x1ea4ec(0x160)](_0x1ea4ec(0x135))[_0x1ea4ec(0x107)][_0x1ea4ec(0x130)]=_0x1ea4ec(0x11d)):(document[_0x1ea4ec(0x160)](_0x1ea4ec(0x135))[_0x1ea4ec(0x107)][_0x1ea4ec(0xf1)]='coral',document[_0x1ea4ec(0x160)](_0x1ea4ec(0x135))[_0x1ea4ec(0x107)]['textShadow']=_0x1ea4ec(0xfd));}function changeColors(){var _0x3480a8=_0x3ffc17;let _0x1d7864=truePosition[dragIdx],_0x5de0a4=convertPolarToAng(cities[dragIdx]['position']);Math[_0x3480a8(0xf9)]((_0x1d7864['lat']-_0x5de0a4[_0x3480a8(0xe8)])**0x2+(_0x1d7864[_0x3480a8(0x123)]-_0x5de0a4[_0x3480a8(0x123)])**0x2)<0.8?(cities[dragIdx][_0x3480a8(0x151)][_0x3480a8(0xf1)][_0x3480a8(0x109)](0xab08),cities[dragIdx][_0x3480a8(0x134)][0x0][_0x3480a8(0x151)][_0x3480a8(0xf1)][_0x3480a8(0x109)](0x59ff4f)):(cities[dragIdx]['material'][_0x3480a8(0xf1)][_0x3480a8(0x109)](0xff0000),cities[dragIdx][_0x3480a8(0x134)][0x0][_0x3480a8(0x151)][_0x3480a8(0xf1)][_0x3480a8(0x109)](0xffffff));return;}let truePosition=[atlanta,beijing,cape,delhi,easter,florence,goiania,hobart];for(let i=0x0;i<truePosition[_0x3ffc17(0x148)];i++){generateCity(String[_0x3ffc17(0x114)](0x41+i),convertCoordsRad(truePosition[i][_0x3ffc17(0xe8)]+sca(),truePosition[i][_0x3ffc17(0x123)]+sca()));}for(let i=0x0;i<cities[_0x3ffc17(0x148)];i++){scene[_0x3ffc17(0x13c)](cities[i]);}let trueDistance=[];for(let i=0x0;i<truePosition['length'];i++){trueDistance[_0x3ffc17(0x108)]([]);for(let j=0x0;j<truePosition['length'];j++){var φ1=truePosition[i][_0x3ffc17(0xe8)]*Math['PI']/0xb4,φ2=truePosition[j]['lat']*Math['PI']/0xb4,Δφ=(truePosition[j][_0x3ffc17(0xe8)]-truePosition[i]['lat'])*Math['PI']/0xb4,Δλ=(truePosition[j]['lon']-truePosition[i][_0x3ffc17(0x123)])*Math['PI']/0xb4,a=Math[_0x3ffc17(0x10d)](Δφ/0x2)*Math[_0x3ffc17(0x10d)](Δφ/0x2)+Math[_0x3ffc17(0x113)](φ1)*Math['cos'](φ2)*Math[_0x3ffc17(0x10d)](Δλ/0x2)*Math[_0x3ffc17(0x10d)](Δλ/0x2),c=0x2*Math['atan2'](Math[_0x3ffc17(0xf9)](a),Math[_0x3ffc17(0xf9)](0x1-a)),d=EarthR*c;trueDistance[i][_0x3ffc17(0x108)](Math[_0x3ffc17(0xf3)](d/0xa)/0x64);}}let currDistance=[];for(let i=0x0;i<cities[_0x3ffc17(0x148)];i++){var home=convertPolarToAng(cities[i][_0x3ffc17(0x154)]);currDistance[_0x3ffc17(0x108)]([]);for(let j=0x0;j<cities[_0x3ffc17(0x148)];j++){var away=convertPolarToAng(cities[j][_0x3ffc17(0x154)]),φ1=home['lat']*Math['PI']/0xb4,φ2=away[_0x3ffc17(0xe8)]*Math['PI']/0xb4,Δφ=(away[_0x3ffc17(0xe8)]-home[_0x3ffc17(0xe8)])*Math['PI']/0xb4,Δλ=(away[_0x3ffc17(0x123)]-home[_0x3ffc17(0x123)])*Math['PI']/0xb4,a=Math[_0x3ffc17(0x10d)](Δφ/0x2)*Math['sin'](Δφ/0x2)+Math['cos'](φ1)*Math['cos'](φ2)*Math[_0x3ffc17(0x10d)](Δλ/0x2)*Math['sin'](Δλ/0x2),c=0x2*Math[_0x3ffc17(0x145)](Math[_0x3ffc17(0xf9)](a),Math[_0x3ffc17(0xf9)](0x1-a)),d=EarthR*c;currDistance[i][_0x3ffc17(0x108)](Math[_0x3ffc17(0xf3)](d/0xa)/0x64);}}let deltaDistances=[];for(let i=0x0;i<currDistance[_0x3ffc17(0x148)];i++){deltaDistances[_0x3ffc17(0x108)]([]);for(let j=0x0;j<trueDistance[_0x3ffc17(0x148)];j++){deltaDistances[i][_0x3ffc17(0x108)](currDistance[i][j]-trueDistance[i][j]);}}document['getElementById'](_0x3ffc17(0xec))[_0x3ffc17(0xf8)]=totalError()[_0x3ffc17(0x120)]();let base=new _0xee9829[(_0x3ffc17(0x143))](),dest=new _0xee9829[(_0x3ffc17(0x143))](),points=[],mid=new _0xee9829['Vector3'](),curve_meshes=[];function drawCurves(){var _0x1f40fc=_0x3ffc17;clearCurves(),curve_meshes=[],base[_0x1f40fc(0x133)](cities[dragIdx]['position']['x'],cities[dragIdx]['position']['y'],cities[dragIdx]['position']['z']);for(let _0x4b63ea=0x0;_0x4b63ea<cities[_0x1f40fc(0x148)];_0x4b63ea++){if(_0x4b63ea==dragIdx)continue;dest[_0x1f40fc(0x133)](cities[_0x4b63ea][_0x1f40fc(0x154)]['x'],cities[_0x4b63ea][_0x1f40fc(0x154)]['y'],cities[_0x4b63ea][_0x1f40fc(0x154)]['z']),points=[],mid[_0x1f40fc(0x157)](dest,base),mid[_0x1f40fc(0x10e)](0.5),mid['normalize'](),mid[_0x1f40fc(0x10e)](0x1e);for(let _0x7f4a9d=0x0;_0x7f4a9d<=0xc;_0x7f4a9d++){let _0x2ba6e4=new _0xee9829['Vector3']()[_0x1f40fc(0xf0)](base,mid,_0x7f4a9d/0xc);_0x2ba6e4['multiplyScalar'](0.5),_0x2ba6e4[_0x1f40fc(0x14f)](),_0x2ba6e4[_0x1f40fc(0x10e)](0x1e),points[_0x1f40fc(0x108)](_0x2ba6e4);}for(let _0x2e0b2f=0x0;_0x2e0b2f<=0xc;_0x2e0b2f++){let _0x1d9ef3=new _0xee9829[(_0x1f40fc(0x143))]()[_0x1f40fc(0xf0)](mid,dest,_0x2e0b2f/0xc);_0x1d9ef3[_0x1f40fc(0x10e)](0.5),_0x1d9ef3['normalize'](),_0x1d9ef3[_0x1f40fc(0x10e)](0x1e),points['push'](_0x1d9ef3);}var _0x5085cc=Math[_0x1f40fc(0x125)](deltaDistances[dragIdx][_0x4b63ea])<0x64?!![]:![];curve_meshes['push'](new _0xee9829['Mesh'](new _0xee9829['TubeBufferGeometry'](new _0xee9829[(_0x1f40fc(0x15b))](points),0x40,0.05,0x32,![]),new _0xee9829[(_0x1f40fc(0x15a))]({'color':_0x5085cc?0x3acabb:0xff8400})));}for(let _0x434e00=0x0;_0x434e00<curve_meshes['length'];_0x434e00++){scene[_0x1f40fc(0x13c)](curve_meshes[_0x434e00]);}}function clearCurves(){var _0x10637e=_0x3ffc17;for(let _0x502a07=0x0;_0x502a07<curve_meshes[_0x10637e(0x148)];_0x502a07++){scene[_0x10637e(0x127)](curve_meshes[_0x502a07]),curve_meshes[_0x502a07][_0x10637e(0x151)]['dispose'](),curve_meshes[_0x502a07][_0x10637e(0x15c)][_0x10637e(0x13a)]();}}var raycaster=new _0xee9829['Raycaster']();raycaster[_0x3ffc17(0xe1)]=0x1,raycaster[_0x3ffc17(0x12a)]=0xc8;var mouse=new _0xee9829[(_0x3ffc17(0xe9))](),raySphere=new _0xee9829['Sphere'](new _0xee9829[(_0x3ffc17(0x143))](0x0,0x0,0x0),0x1e),raySphereIntersect=new _0xee9829[(_0x3ffc17(0x143))](),shift=new _0xee9829[(_0x3ffc17(0x143))](),isDragging=![],dragIdx=0x0;function _0x1361(_0x14aafd,_0x33d30f){var _0xc08a57=_0xc08a();return _0x1361=function(_0x13618d,_0x40c7f3){_0x13618d=_0x13618d-0xe1;var _0x44fb73=_0xc08a57[_0x13618d];return _0x44fb73;},_0x1361(_0x14aafd,_0x33d30f);}rayCities[_0x3ffc17(0x108)](sphere),document[_0x3ffc17(0xef)](_0x3ffc17(0x110),_0x546e9e=>{var _0x55e24b=_0x3ffc17;mouse['x']=_0x546e9e['clientX']/window['innerWidth']*0x2-0x1,mouse['y']=-(_0x546e9e[_0x55e24b(0x115)]/window[_0x55e24b(0x102)])*0x2+0x1,isDragging&&(raycaster['setFromCamera'](mouse,camera),raycaster[_0x55e24b(0x13b)]['intersectSphere'](raySphere,raySphereIntersect),cities[dragIdx]['position'][_0x55e24b(0x157)](raySphereIntersect,shift),changeColors(),haversine(),drawCurves());}),document['addEventListener']('pointerdown',()=>{var _0xd2efb2=_0x3ffc17;raycaster[_0xd2efb2(0x13d)](mouse,camera);var _0x5206e6=raycaster[_0xd2efb2(0x119)](rayCities);if(_0x5206e6['length']>0x0&&_0x5206e6[0x0][_0xd2efb2(0x10b)]==sphere)return;raycaster['ray'][_0xd2efb2(0x150)](raySphere,raySphereIntersect);if(_0x5206e6[_0xd2efb2(0x148)]>0x0){controls[_0xd2efb2(0x156)]=![],isDragging=!![];for(let _0x46965c=0x0;_0x46965c<cities[_0xd2efb2(0x148)];_0x46965c++){if(cities[_0x46965c]==_0x5206e6[0x0]['object']){dragIdx=_0x46965c;break;}}haversine(),drawCurves();}}),document['addEventListener'](_0x3ffc17(0x131),()=>{var _0xccd2be=_0x3ffc17;isDragging=![],dragIdx=null,controls[_0xccd2be(0x156)]=!![],clearCurves();}),document[_0x3ffc17(0x160)](_0x3ffc17(0x129))[_0x3ffc17(0xef)](_0x3ffc17(0x103),()=>{var _0x2dc612=_0x3ffc17;console[_0x2dc612(0x11b)](_0x2dc612(0x14a));for(let _0x4112d8=0x0;_0x4112d8<cities[_0x2dc612(0x148)];_0x4112d8++){dragIdx=_0x4112d8;var _0x2b5d63=convertCoordsRad(truePosition[_0x4112d8][_0x2dc612(0xe8)],truePosition[_0x4112d8][_0x2dc612(0x123)]);cities[_0x4112d8][_0x2dc612(0x154)]['set'](_0x2b5d63['x'],_0x2b5d63['y'],_0x2b5d63['z']),haversine(),changeColors();}dragIdx=null;});function animate(){var _0x1264b8=_0x3ffc17;controls[_0x1264b8(0x152)](),frame=(frame+0x1)%0x1,rotateStars(),requestAnimationFrame(animate),renderer[_0x1264b8(0xfc)](scene,camera);}animate();